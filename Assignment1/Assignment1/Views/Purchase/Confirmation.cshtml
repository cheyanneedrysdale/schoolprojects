@model Assignment1.Models.Purchase
@{
    ViewData["Title"] = "Purchase Confirmation";
}

<h2>@ViewData["Title"]</h2>

<div class="alert alert-success">
    thank you, <strong>@Model.GuestName</strong>! your purchase recorded!
</div>

<dl class="row">
    <dt class="col-sm-3">purchase #:</dt>
    <dd class="col-sm-9">@Model.PurchaseId</dd>

    <dt class="col-sm-3">date of purchase:</dt>
    <dd class="col-sm-9">@Model.PurchaseDate.ToString("yyyy-MM-dd HH:mm")</dd>

    <dt class="col-sm-3">guest email:</dt>
    <dd class="col-sm-9">@Model.GuestEmail</dd>

    <dt class="col-sm-3">purchase total:</dt>
    <dd class="col-sm-9">@Model.TotalCost.ToString("C")</dd>
</dl>

<h4 class="mt-4">items</h4>
@if (Model.Items != null && Model.Items.Any())
{
    <table class="table table-striped">
        <thead>
        <tr>
            <th>event</th>
            <th>date & time</th>
            <th>qty</th>
            <th>unit price</th>
            <th>line total</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var it in Model.Items)
        {
            <tr>
                <td>@it.EventInfo?.Title</td>
                <td>@it.EventInfo?.StartsAt.ToString("yyyy-MM-dd HH:mm")</td>
                <td>@it.Quantity</td>
                <td>@it.UnitPrice.ToString("C")</td>
                <td>@( (it.UnitPrice * it.Quantity).ToString("C") )</td>
            </tr>
        }
        </tbody>
    </table>
}
else
{
    <em>no items!</em>
}

<p class="mt-3">
    <a asp-controller="Event" asp-action="Index" class="btn btn-primary">take me back to Events</a>
</p>